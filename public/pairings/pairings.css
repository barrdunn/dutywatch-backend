:root{
  color-scheme:dark;

  --bg:#0b0f14; --card:#121821; --row:#0f141b; --row-alt:#0d1219; --border:#1e2a38;
  --text:#e8edf2; --muted:#9fb0c0; --accent:#6fb1ff; --strike:#84a1b7;
  --pairing-bg:rgba(51,127,86,.16); --pairing-bg-hover:rgba(61,153,106,.26); --pairing-border:rgba(73,179,124,.35);
  --green:#98f5a7; --off:#ffae60; --chip:#182231; --red:#ff6b6b;

  --ck-off:#62717f; --ck-pending:#ffd166; --ck-ok:#57e389;

  /* Check-in spacer column width */
  --ckcol-desktop: 76px;
  --ckcol-mobile: 56px;
  --ckcol: var(--ckcol-desktop);
}

*{box-sizing:border-box}
html,body{overflow-x:hidden}
body{margin:0;background:var(--bg);color:var(--text);font:14px/1.5 system-ui,-apple-system,Segoe UI,Roboto,Ubuntu,Cantarell,"Helvetica Neue",Arial,"Noto Sans",sans-serif}

.wrap{max-width:1100px;margin:28px auto;padding:0 16px}
.card{background:var(--card);border:1px solid var(--border);border-radius:14px;padding:16px;box-shadow:0 6px 18px rgba(0,0,0,.25)}
h1{margin:0 0 8px;font-size:22px}

/* chips/controls */
.sub{display:flex;flex-wrap:wrap;gap:8px;align-items:center;margin:8px 0 16px}
.chip{background:var(--chip);border:1px solid var(--border);border-radius:999px;padding:4px 10px;color:var(--muted);font-weight:600}
.controls{display:flex;gap:12px;flex-wrap:wrap;align-items:center;margin-bottom:14px}
.controls form{display:inline-flex;gap:8px;align-items:center}
.btn{background:var(--accent);color:#031323;border:0;border-radius:10px;padding:8px 12px;font-weight:600;cursor:pointer}
.toggle,select.toggle{background:transparent;color:var(--text);border:1px solid var(--border);border-radius:10px;padding:6px 10px;cursor:pointer}

/* =========================
   Main table
   ========================= */
#pairings{width:100%;border-collapse:separate;border-spacing:0 10px;table-layout:fixed}
#pairings th,#pairings td{padding:10px 10px;vertical-align:middle;text-align:left}
#pairings th{color:var(--muted);font-weight:600;border-bottom:1px solid var(--border);white-space:nowrap}

/* 4 columns: (blank header), Pairing, Report, Release */
#pairings th:nth-child(1), #pairings td:nth-child(1){width:var(--ckcol);min-width:var(--ckcol);padding-left:0;padding-right:0}
#pairings th:nth-child(2), #pairings td:nth-child(2){width:48%}   /* Pairing */
#pairings th:nth-child(3), #pairings td:nth-child(3){width:26%}   /* Report (a bit closer) */
#pairings th:nth-child(4), #pairings td:nth-child(4){width:26%}   /* Release */

@media (max-width:640px){
  :root{--ckcol:var(--ckcol-mobile)}
  #pairings th:first-child{white-space:normal}
}

/* clickable cues */
tr.summary,tr.summary td{cursor:pointer}
.dayhdr{cursor:pointer}

/* spacer / checkbox column */
td.ckcol{padding:0!important}

/* checkbox visuals (in Check In column) */
.ckbtn{appearance:none;background:transparent;border:0;padding:0;margin:0;cursor:pointer;line-height:0;display:inline-flex;align-items:center;justify-content:center}
.ck{display:inline-flex;align-items:center;justify-content:center;width:100%}
.ckbox{width:22px;height:22px;border-radius:6px;background:transparent;border:2px solid var(--ck-off);display:inline-flex;align-items:center;justify-content:center;position:relative;transition:transform .06s ease}
.ck.off .ckbox{border-color:var(--ck-off)}
.ck.pending .ckbox{border-color:var(--ck-pending)}
.ck.ok .ckbox{border-color:var(--ck-ok);background:var(--ck-ok)}
.ck.ok .ckbox::after{content:"âœ“";font-weight:900;font-size:14px;line-height:1;color:#0b1510;transform:translateY(-1px)}

/* capsules (rounded ends) */
tr.summary td:not(.ckcol){background:var(--pairing-bg);border-top:1px solid var(--pairing-border);border-bottom:1px solid var(--pairing-border)}
tr.summary:hover td:not(.ckcol){background:var(--pairing-bg-hover)}
tr.summary td.sum-first{border-left:1px solid var(--pairing-border);border-top-left-radius:12px;border-bottom-left-radius:12px}
tr.summary td:last-child{border-right:1px solid var(--pairing-border);border-top-right-radius:12px;border-bottom-right-radius:12px}

/* OFF rows */
tr.off td:not(.ckcol){background:var(--row);border-top:1px solid var(--border);border-bottom:1px solid var(--border)}
tr.off td.sum-first{border-left:1px solid var(--border);border-top-left-radius:12px;border-bottom-left-radius:12px}
tr.off td:last-child{border-right:1px solid var(--border);border-top-right-radius:12px;border-bottom-right-radius:12px}
.off-label,.off-dur{font-weight:800;color:var(--off)}
.off-dur{white-space:nowrap}
.off-label .fw-normal,.off-dur .fw-normal{font-weight:400!important}

/* details capsule (aligned after spacer col) */
tr.details{display:none}
tr.summary.open+tr.details{display:table-row}
tr.details>td{position:relative;background:transparent;border:0;padding:0}
tr.details>td::before{content:"";position:absolute;left:var(--ckcol);right:0;top:0;bottom:0;background:var(--row-alt);border:1px solid var(--border);border-radius:12px;z-index:0}
.daysbox{position:relative;z-index:1;padding:12px 16px 14px;border-radius:10px;margin-left:var(--ckcol)}

/* Day header */
.day{margin:8px 0 14px}
.dayhdr{background:rgba(73,179,124,.14);border:0;border-radius:10px;padding:8px 10px;display:flex;gap:10px;align-items:center;flex-wrap:wrap;font-weight:600}
.dayhdr .daytitle{font-weight:600}
.dot{width:6px;height:6px;border-radius:999px;background:#7ee2a1;display:inline-block;margin-right:4px}

/* Legs table (includes Flight Tracking col) */
.legs{width:100%;border-collapse:collapse;table-layout:fixed}
.legs th,.legs td{padding:6px 8px;border-bottom:1px solid var(--border);vertical-align:middle;text-align:left}
.legs th{color:var(--muted);font-size:12px;white-space:nowrap}
.legs th:first-child,.legs td:first-child{width:26%!important;white-space:nowrap}
.legs th:nth-child(2),.legs td:nth-child(2){width:30%!important;padding-right:8px}
.legs th:nth-child(3),.legs td:nth-child(3){width:26%!important;padding-left:12px;font-variant-numeric:tabular-nums}
.legs th:nth-child(4),.legs td:nth-child(4){width:18%!important} /* Flight Tracking */
.leg-done td{text-decoration:line-through;color:var(--strike)}
.legs td.bt{font-variant-numeric:tabular-nums;white-space:nowrap}

/* Mobile wrapping */
@media (max-width:640px){
  .legs td:first-child{white-space:nowrap;word-break:normal}
  .legs td:nth-child(3){white-space:normal;word-break:normal;overflow-wrap:anywhere}
}

/* pills */
.pill{display:inline-flex;align-items:center;gap:6px;font-size:12px;font-weight:700;white-space:nowrap;color:#021216;background:var(--green);padding:3px 8px;border-radius:999px;margin-left:8px}
.pill-red{background:var(--red);color:#130606;margin-left:8px}
.progress{font-weight:800;margin-left:8px;color:var(--green)}

/* Modal */
body.modal-open{overflow:hidden}
.modal{position:fixed;inset:0;z-index:10000;background:rgba(0,0,0,.55);display:flex;align-items:center;justify-content:center;padding:16px;touch-action:none}
.modal-card{background:var(--card);border:1px solid var(--border);border-radius:12px;width:calc(100% - 32px);max-width:720px;max-height:85vh;overflow:auto;box-shadow:0 20px 60px rgba(0,0,0,.6)}
.modal-header,.modal-footer{padding:12px 14px;border-bottom:1px solid var(--border);display:flex;align-items:center}
.modal-footer{border-top:1px solid var(--border);border-bottom:0;justify-content:flex-end}
.modal-header h2{margin:0;font-size:18px}
.modal-close{margin-left:auto;background:transparent;border:0;color:#fff;font-size:20px;cursor:pointer}
.modal-content{padding:14px}

/* Plan table */
.plan-table{width:100%;border-collapse:collapse;table-layout:fixed}
.plan-table th,.plan-table td{border-bottom:1px solid var(--border);padding:8px 10px;width:33.3333%}
.plan-table th:nth-child(1),.plan-table td:nth-child(1){text-align:left}
.plan-table th:nth-child(2),.plan-table td:nth-child(2){text-align:center}
.plan-table th:nth-child(3),.plan-table td:nth-child(3){text-align:left}
.plan-meta{margin-bottom:8px}

/* utils */
.muted{color:var(--muted)}
.hidden{display:none!important}

.ios table{table-layout:fixed}
.ios th,.ios td{word-break:break-word;overflow-wrap:anywhere}

.fw-normal{font-weight:400!important}
.off .off-dur .fw-normal,.off .sum-first .fw-normal{font-weight:400!important}
tr.off td.off-dur .fw-normal { font-weight:400 !important; }
